<div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-sm w-100" style="max-width: 400px;">
    <div class="card-body">
      <h3 class="mb-4 text-center text-primary">🔐 Login</h3>

      <form [formGroup]="form" (ngSubmit)="submit()">
        <!-- Email Field -->
        <div class="mb-3">
          <label class="form-label">Email</label>
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-envelope-fill"></i>
            </span>
            <input
              type="email"
              formControlName="email"
              class="form-control"
              [class.is-invalid]="form.get('email')?.invalid && form.get('email')?.touched"
            />
            <div class="invalid-feedback" *ngIf="form.get('email')?.errors?.['required']">
              Email is required.
            </div>
            <div class="invalid-feedback" *ngIf="form.get('email')?.errors?.['email']">
              Enter a valid email address.
            </div>
          </div>
        </div>

        <!-- Password Field -->
       <div class="mb-3">
  <label class="form-label">Password</label>
  <div class="input-group">
    <span class="input-group-text">
      <i class="bi bi-lock-fill"></i>
    </span>
    <input
      [type]="showPassword ? 'text' : 'password'"
      formControlName="password"
      class="form-control"
      [class.is-invalid]="form.get('password')?.invalid && form.get('password')?.touched"
    />
    <!-- زر العين -->
    <button
      type="button"
      class="btn btn-outline-secondary"
      (click)="showPassword = !showPassword"
      tabindex="-1"
    >
      <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
    </button>

    <div class="invalid-feedback" *ngIf="form.get('password')?.errors?.['required']">
      Password is required.
    </div>
  </div>
</div>
        <!-- Submit Button -->
        <button [disabled]="loading || form.invalid" class="btn btn-primary w-100">
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
          {{ loading ? 'Logging in...' : 'Login' }}
        </button>
        <!-- Link to Register -->
<div class="text-center mt-3">
  <span>Don't have an account?</span>
  <a routerLink="/register" class="text-decoration-none text-primary fw-semibold">
    Register here
  </a>
</div>

      </form>

      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-danger mt-3 text-center">
        {{ error }}
      </div>
    </div>
  </div>
</div>
